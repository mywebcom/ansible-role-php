---
language: python
python: "2.7"

before_install:
  - "sudo apt-get update -qq"

install:
  - "pip install ansible"
  - "{ echo '[defaults]'; echo 'roles_path = ../'; } >> ansible.cfg"

script:
  - 'ansible-playbook -i tests/inventory tests/test.yml --syntax-check'
  - 'ansible-playbook -i tests/inventory tests/test.yml --connection=local -vvvv --sudo'
  - 'php -i | grep -q "memcache" && (echo "Test Passed" && exit 0) || (echo "Test Failed" && exit 1)'
  - 'php -i | grep -q "opcache" && (echo "Test Passed" && exit 0) || (echo "Test Failed" && exit 1)'
  - 'php -i | grep -q "imagemagick" && (echo "Test Passed" && exit 0) || (echo "Test Failed" && exit 1)'
  - 'php -i | grep -q "ioncube" && (echo "Test Passed" && exit 0) || (echo "Test Failed" && exit 1)'